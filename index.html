<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì¥ê¸°ìš”ì–‘ë“±ê¸‰ ìê°€ì§„ë‹¨ | ì¼€ì–´ë‹¥ ë•í¬íŒŒíŠ¸ë„ˆì§€ì </title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;600;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #faf8f5;
    --card: #ffffff;
    --primary: #2d5a3d;
    --primary-light: #4a8a60;
    --accent: #e8955a;
    --accent-light: #f4b88a;
    --text: #1a1a1a;
    --text-muted: #6b7280;
    --border: #e5e0d8;
    --danger: #c94040;
    --warning: #d97706;
    --success: #2d5a3d;
    --grade1: #7c3aed;
    --grade2: #c94040;
    --grade3: #d97706;
    --grade4: #2563eb;
    --grade5: #0891b2;
    --cognition: #6d28d9;
    --fail: #4b5563;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--bg);
    color: var(--text);
    min-height: 100vh;
  }

  /* HEADER */
  .header {
    background: var(--primary);
    padding: 20px 24px;
    text-align: center;
    position: relative;
    overflow: hidden;
  }
  .header::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -10%;
    width: 300px;
    height: 300px;
    background: rgba(255,255,255,0.04);
    border-radius: 50%;
  }
  .header-badge {
    display: inline-block;
    background: var(--accent);
    color: white;
    font-size: 11px;
    font-weight: 700;
    padding: 4px 12px;
    border-radius: 20px;
    letter-spacing: 1px;
    margin-bottom: 10px;
  }
  .header h1 {
    font-family: 'Noto Serif KR', serif;
    color: white;
    font-size: 22px;
    font-weight: 700;
    line-height: 1.4;
  }
  .header p {
    color: rgba(255,255,255,0.75);
    font-size: 13px;
    margin-top: 6px;
  }

  /* PROGRESS */
  .progress-bar {
    background: #e5e7eb;
    height: 4px;
    position: sticky;
    top: 0;
    z-index: 100;
  }
  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary), var(--accent));
    transition: width 0.4s ease;
    width: 0%;
  }
  .progress-label {
    text-align: center;
    font-size: 12px;
    color: var(--text-muted);
    padding: 8px;
    background: white;
    border-bottom: 1px solid var(--border);
  }

  /* SECTIONS */
  .section {
    display: none;
    padding: 20px 16px;
    max-width: 600px;
    margin: 0 auto;
    animation: fadeIn 0.3s ease;
  }
  .section.active { display: block; }

  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* INTRO */
  .intro-card {
    background: white;
    border-radius: 16px;
    padding: 28px 24px;
    margin-bottom: 16px;
    border: 1px solid var(--border);
    box-shadow: 0 2px 12px rgba(0,0,0,0.06);
  }
  .intro-icon {
    font-size: 48px;
    text-align: center;
    margin-bottom: 16px;
  }
  .intro-card h2 {
    font-family: 'Noto Serif KR', serif;
    font-size: 20px;
    font-weight: 700;
    text-align: center;
    margin-bottom: 12px;
    color: var(--primary);
  }
  .intro-card p {
    font-size: 14px;
    line-height: 1.7;
    color: var(--text-muted);
    text-align: center;
  }
  .info-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 10px;
    margin: 20px 0;
  }
  .info-item {
    background: var(--bg);
    border-radius: 10px;
    padding: 14px;
    text-align: center;
    border: 1px solid var(--border);
  }
  .info-item .num { font-size: 22px; font-weight: 700; color: var(--primary); }
  .info-item .label { font-size: 11px; color: var(--text-muted); margin-top: 2px; }

  /* SECTION HEADER */
  .section-header {
    margin-bottom: 16px;
  }
  .section-header .category-tag {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    background: var(--primary);
    color: white;
    font-size: 12px;
    font-weight: 600;
    padding: 5px 12px;
    border-radius: 20px;
    margin-bottom: 8px;
  }
  .section-header h2 {
    font-family: 'Noto Serif KR', serif;
    font-size: 18px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .section-header p {
    font-size: 13px;
    color: var(--text-muted);
    line-height: 1.5;
  }

  /* QUESTION CARD */
  .question-card {
    background: white;
    border-radius: 14px;
    padding: 20px;
    margin-bottom: 12px;
    border: 1px solid var(--border);
    box-shadow: 0 1px 6px rgba(0,0,0,0.04);
    transition: border-color 0.2s;
  }
  .question-card.answered { border-color: var(--primary-light); }
  .question-card h3 {
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 14px;
    line-height: 1.5;
    color: var(--text);
  }
  .question-card .q-num {
    display: inline-block;
    background: var(--primary);
    color: white;
    font-size: 11px;
    font-weight: 700;
    width: 22px;
    height: 22px;
    border-radius: 50%;
    text-align: center;
    line-height: 22px;
    margin-right: 6px;
    flex-shrink: 0;
  }

  /* OPTIONS */
  .options { display: flex; flex-direction: column; gap: 8px; }
  .option-btn {
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 12px 14px;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    background: white;
    cursor: pointer;
    transition: all 0.2s;
    text-align: left;
    width: 100%;
    font-family: 'Noto Sans KR', sans-serif;
  }
  .option-btn:hover { border-color: var(--primary-light); background: #f0f7f3; }
  .option-btn.selected { border-color: var(--primary); background: #eaf3ee; }
  .option-btn.selected .opt-dot { background: var(--primary); }
  .opt-dot {
    width: 16px;
    height: 16px;
    border-radius: 50%;
    border: 2px solid var(--border);
    flex-shrink: 0;
    transition: all 0.2s;
  }
  .option-btn.selected .opt-dot { border-color: var(--primary); background: var(--primary); }
  .opt-label { font-size: 13px; color: var(--text); }
  .opt-score {
    margin-left: auto;
    font-size: 11px;
    color: var(--text-muted);
    background: var(--bg);
    padding: 2px 8px;
    border-radius: 20px;
    white-space: nowrap;
  }
  .option-btn.selected .opt-score { background: var(--primary); color: white; }

  /* SPECIAL: YES/NO */
  .yn-options { display: flex; gap: 8px; }
  .yn-btn {
    flex: 1;
    padding: 12px;
    border: 1.5px solid var(--border);
    border-radius: 10px;
    background: white;
    cursor: pointer;
    font-size: 13px;
    font-weight: 600;
    font-family: 'Noto Sans KR', sans-serif;
    transition: all 0.2s;
  }
  .yn-btn:hover { border-color: var(--primary-light); }
  .yn-btn.selected-yes { border-color: var(--primary); background: #eaf3ee; color: var(--primary); }
  .yn-btn.selected-no { border-color: var(--border); background: #f5f5f5; color: var(--text-muted); }

  /* NAV BUTTONS */
  .nav-buttons {
    display: flex;
    gap: 10px;
    margin-top: 24px;
    padding-bottom: 40px;
  }
  .btn {
    flex: 1;
    padding: 15px;
    border-radius: 12px;
    font-size: 15px;
    font-weight: 700;
    font-family: 'Noto Sans KR', sans-serif;
    cursor: pointer;
    border: none;
    transition: all 0.2s;
  }
  .btn-primary {
    background: var(--primary);
    color: white;
  }
  .btn-primary:hover { background: var(--primary-light); transform: translateY(-1px); }
  .btn-secondary {
    background: white;
    color: var(--text-muted);
    border: 1.5px solid var(--border);
    flex: 0.4;
  }
  .btn-start {
    width: 100%;
    padding: 18px;
    border-radius: 14px;
    font-size: 17px;
    font-weight: 700;
    background: var(--primary);
    color: white;
    border: none;
    cursor: pointer;
    font-family: 'Noto Sans KR', sans-serif;
    transition: all 0.2s;
    box-shadow: 0 4px 15px rgba(45,90,61,0.3);
  }
  .btn-start:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(45,90,61,0.4); }

  /* RESULT */
  .result-hero {
    border-radius: 20px;
    padding: 32px 24px;
    text-align: center;
    margin-bottom: 16px;
    position: relative;
    overflow: hidden;
    color: white;
  }
  .result-hero.grade1 { background: linear-gradient(135deg, #7c3aed, #a855f7); }
  .result-hero.grade2 { background: linear-gradient(135deg, #c94040, #ef4444); }
  .result-hero.grade3 { background: linear-gradient(135deg, #d97706, #f59e0b); }
  .result-hero.grade4 { background: linear-gradient(135deg, #2563eb, #3b82f6); }
  .result-hero.grade5 { background: linear-gradient(135deg, #0891b2, #06b6d4); }
  .result-hero.cognition { background: linear-gradient(135deg, #6d28d9, #8b5cf6); }
  .result-hero.fail { background: linear-gradient(135deg, #4b5563, #6b7280); }
  .result-hero::before {
    content: '';
    position: absolute;
    top: -30%;
    right: -10%;
    width: 200px;
    height: 200px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
  }

  .result-grade-label {
    font-size: 12px;
    font-weight: 600;
    opacity: 0.85;
    letter-spacing: 2px;
    margin-bottom: 6px;
  }
  .result-grade-main {
    font-family: 'Noto Serif KR', serif;
    font-size: 38px;
    font-weight: 700;
    margin-bottom: 4px;
  }
  .result-score {
    font-size: 14px;
    opacity: 0.85;
    margin-bottom: 12px;
  }
  .result-desc {
    font-size: 14px;
    opacity: 0.9;
    line-height: 1.6;
    background: rgba(255,255,255,0.15);
    border-radius: 10px;
    padding: 12px;
  }

  /* RESULT DETAIL */
  .result-card {
    background: white;
    border-radius: 14px;
    padding: 20px;
    margin-bottom: 12px;
    border: 1px solid var(--border);
    box-shadow: 0 1px 6px rgba(0,0,0,0.04);
  }
  .result-card h3 {
    font-size: 15px;
    font-weight: 700;
    margin-bottom: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  /* SCORE BAR */
  .score-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }
  .score-row-label { font-size: 13px; width: 80px; flex-shrink: 0; }
  .score-bar-bg {
    flex: 1;
    height: 8px;
    background: var(--bg);
    border-radius: 4px;
    overflow: hidden;
  }
  .score-bar-fill {
    height: 100%;
    border-radius: 4px;
    background: var(--primary);
    transition: width 1s ease;
  }
  .score-val { font-size: 12px; font-weight: 700; color: var(--primary); width: 40px; text-align: right; }

  /* WEAK POINTS */
  .weak-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 12px;
    background: #fff8f0;
    border-radius: 10px;
    margin-bottom: 8px;
    border-left: 3px solid var(--accent);
  }
  .weak-icon { font-size: 18px; flex-shrink: 0; }
  .weak-content h4 { font-size: 13px; font-weight: 700; margin-bottom: 2px; }
  .weak-content p { font-size: 12px; color: var(--text-muted); line-height: 1.5; }

  /* GRADE TABLE */
  .grade-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 12px;
  }
  .grade-table th {
    background: var(--primary);
    color: white;
    padding: 8px 10px;
    text-align: left;
    font-weight: 600;
  }
  .grade-table td {
    padding: 8px 10px;
    border-bottom: 1px solid var(--border);
  }
  .grade-table tr:last-child td { border-bottom: none; }
  .grade-table tr.current-grade td { background: #eaf3ee; font-weight: 600; }
  .grade-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    display: inline-block;
    margin-right: 6px;
  }

  /* CTA */
  .cta-card {
    background: var(--primary);
    border-radius: 16px;
    padding: 24px;
    text-align: center;
    color: white;
    margin-bottom: 16px;
  }
  .cta-card h3 { font-size: 17px; font-weight: 700; margin-bottom: 8px; }
  .cta-card p { font-size: 13px; opacity: 0.85; margin-bottom: 16px; line-height: 1.6; }
  .cta-btn {
    display: inline-block;
    background: var(--accent);
    color: white;
    padding: 12px 24px;
    border-radius: 10px;
    font-size: 14px;
    font-weight: 700;
    text-decoration: none;
    transition: all 0.2s;
  }
  .cta-btn:hover { background: var(--accent-light); transform: translateY(-1px); }
  .restart-btn {
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    background: white;
    border: 1.5px solid var(--border);
    font-size: 14px;
    font-weight: 600;
    color: var(--text-muted);
    cursor: pointer;
    font-family: 'Noto Sans KR', sans-serif;
    margin-bottom: 40px;
  }

  /* NOTICE BOX */
  .notice-box {
    background: #fffbeb;
    border: 1px solid #fde68a;
    border-radius: 10px;
    padding: 12px 14px;
    margin-bottom: 16px;
    font-size: 12px;
    color: #92400e;
    line-height: 1.6;
  }

  /* DEMENTIA CHECK */
  .dementia-section {
    background: #f0f4ff;
    border: 1px solid #c7d2fe;
    border-radius: 12px;
    padding: 16px;
    margin-bottom: 16px;
  }
  .dementia-section h4 {
    font-size: 14px;
    font-weight: 700;
    color: #3730a3;
    margin-bottom: 8px;
  }
  .dementia-section p { font-size: 13px; color: #4338ca; line-height: 1.5; }
</style>
</head>
<body>

<div class="header">
  <div class="header-badge">ë¬´ë£Œ Â· ì¦‰ì‹œí™•ì¸</div>
  <h1>ì¥ê¸°ìš”ì–‘ë“±ê¸‰<br>ìê°€ì§„ë‹¨ í”„ë¡œê·¸ë¨</h1>
  <p>ì¼€ì–´ë‹¥ ë•í¬íŒŒíŠ¸ë„ˆì§€ì  | ë¶€ì‚° ì‚¬ìƒêµ¬</p>
</div>

<div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
<div class="progress-label" id="progressLabel">ì‹œì‘ ì „</div>

<!-- SECTION 0: INTRO -->
<div class="section active" id="section-0">
  <div class="intro-card">
    <div class="intro-icon">ğŸ¥</div>
    <h2>ìš°ë¦¬ ë¶€ëª¨ë‹˜,<br>ëª‡ ë“±ê¸‰ ë°›ì„ ìˆ˜ ìˆì„ê¹Œìš”?</h2>
    <p>í˜„ì¥ì—ì„œ ìˆ˜ë°± ê±´ì˜ ë“±ê¸‰ ì‹ ì²­ì„ ë„ì™€ë“œë¦° ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ,<br>ì•½ 3~5ë¶„ ì•ˆì— ì˜ˆìƒ ë“±ê¸‰ì„ í™•ì¸í•´ ë“œë¦½ë‹ˆë‹¤.</p>
    <div class="info-grid">
      <div class="info-item">
        <div class="num">52ê°œ</div>
        <div class="label">ê³µë‹¨ í‰ê°€ í•µì‹¬ í•­ëª©</div>
      </div>
      <div class="info-item">
        <div class="num">1~5ë“±ê¸‰</div>
        <div class="label">+ ì¸ì§€ì§€ì›ë“±ê¸‰ íŒì •</div>
      </div>
      <div class="info-item">
        <div class="num">3ë¶„</div>
        <div class="label">ì†Œìš” ì‹œê°„</div>
      </div>
      <div class="info-item">
        <div class="num">ë¬´ë£Œ</div>
        <div class="label">íšŒì›ê°€ì… ë¶ˆí•„ìš”</div>
      </div>
    </div>
    <div class="notice-box">
      âš ï¸ ë³¸ ì§„ë‹¨ì€ ì°¸ê³ ìš©ì´ë©°, ì‹¤ì œ ë“±ê¸‰ì€ ê³µë‹¨ ë°©ë¬¸ì¡°ì‚¬ ê²°ê³¼ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì–´ë¥´ì‹ ì˜ <strong>í‰ì†Œ ìƒíƒœ</strong>ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì†”ì§í•˜ê²Œ ì‘ë‹µí•´ ì£¼ì„¸ìš”.
    </div>
  </div>
  <button class="btn-start" onclick="startDiagnosis()">ìê°€ì§„ë‹¨ ì‹œì‘í•˜ê¸° â†’</button>
</div>

<!-- SECTION 1: ì‹ ì²´ê¸°ëŠ¥ -->
<div class="section" id="section-1">
  <div class="section-header">
    <div class="category-tag">ğŸ’ª ì˜ì—­ 1</div>
    <h2>ì‹ ì²´ê¸°ëŠ¥ í‰ê°€</h2>
    <p>ì¼ìƒìƒí™œì—ì„œ ì–´ë¥´ì‹ ì´ ì–¼ë§ˆë‚˜ ë„ì›€ì„ í•„ìš”ë¡œ í•˜ì‹œëŠ”ì§€ ì²´í¬í•´ ì£¼ì„¸ìš”. <strong>í‰ì†Œ ê¸°ì¤€</strong>ìœ¼ë¡œ ì†”ì§í•˜ê²Œ ì„ íƒí•˜ì„¸ìš”.</p>
  </div>

  <div id="physical-questions"></div>

  <div class="nav-buttons">
    <button class="btn btn-secondary" onclick="goSection(0)">â† ì´ì „</button>
    <button class="btn btn-primary" onclick="goSection(2)">ë‹¤ìŒ â†’</button>
  </div>
</div>

<!-- SECTION 2: ì¸ì§€ê¸°ëŠ¥ -->
<div class="section" id="section-2">
  <div class="section-header">
    <div class="category-tag">ğŸ§  ì˜ì—­ 2</div>
    <h2>ì¸ì§€ê¸°ëŠ¥ í‰ê°€</h2>
    <p>ê¸°ì–µë ¥, íŒë‹¨ë ¥, ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ì„ í‰ê°€í•©ë‹ˆë‹¤.</p>
  </div>

  <div id="cognitive-questions"></div>

  <div class="nav-buttons">
    <button class="btn btn-secondary" onclick="goSection(1)">â† ì´ì „</button>
    <button class="btn btn-primary" onclick="goSection(3)">ë‹¤ìŒ â†’</button>
  </div>
</div>

<!-- SECTION 3: í–‰ë™ë³€í™” -->
<div class="section" id="section-3">
  <div class="section-header">
    <div class="category-tag">ğŸ”„ ì˜ì—­ 3</div>
    <h2>í–‰ë™ë³€í™” í‰ê°€</h2>
    <p>ìµœê·¼ í•œ ë‹¬ ë™ì•ˆ ë³´ì´ì‹  í–‰ë™ ë³€í™”ë¥¼ ì²´í¬í•´ ì£¼ì„¸ìš”.</p>
  </div>

  <div id="behavior-questions"></div>

  <div class="nav-buttons">
    <button class="btn btn-secondary" onclick="goSection(2)">â† ì´ì „</button>
    <button class="btn btn-primary" onclick="goSection(4)">ë‹¤ìŒ â†’</button>
  </div>
</div>

<!-- SECTION 4: ê°„í˜¸ì²˜ì¹˜ + ì¹˜ë§¤ -->
<div class="section" id="section-4">
  <div class="section-header">
    <div class="category-tag">ğŸ’Š ì˜ì—­ 4</div>
    <h2>ê°„í˜¸ì²˜ì¹˜ & íŠ¹ì´ì‚¬í•­</h2>
    <p>ì˜ë£Œì  ì²˜ì¹˜ í•„ìš” ì—¬ë¶€ì™€ ì¹˜ë§¤ ì§„ë‹¨ì„ í™•ì¸í•©ë‹ˆë‹¤.</p>
  </div>

  <div class="dementia-section">
    <h4>ğŸ”µ ì¹˜ë§¤ ì§„ë‹¨ ì—¬ë¶€ (5ë“±ê¸‰/ì¸ì§€ì§€ì›ë“±ê¸‰ í•µì‹¬ ì¡°ê±´)</h4>
    <p>ì¹˜ë§¤ ì§„ë‹¨ ì—¬ë¶€ëŠ” 5ë“±ê¸‰ê³¼ ì¸ì§€ì§€ì›ë“±ê¸‰ íŒì •ì— í•„ìˆ˜ ì¡°ê±´ì…ë‹ˆë‹¤.</p>
  </div>

  <div id="nursing-questions"></div>

  <div class="nav-buttons">
    <button class="btn btn-secondary" onclick="goSection(3)">â† ì´ì „</button>
    <button class="btn btn-primary" onclick="calculateResult()">ê²°ê³¼ í™•ì¸í•˜ê¸° â†’</button>
  </div>
</div>

<!-- SECTION 5: RESULT -->
<div class="section" id="section-5">
  <div id="result-content"></div>
  <button class="restart-btn" onclick="restart()">â†º ì²˜ìŒë¶€í„° ë‹¤ì‹œ í•˜ê¸°</button>
</div>

<script>
// ===========================
// DATA
// ===========================
const physicalQuestions = [
  { id: 'p1', text: 'ì˜· ê°ˆì•„ì…ê¸° (ìƒÂ·í•˜ì˜ ì„ íƒ, ë‹¨ì¶”Â·ì§€í¼ í¬í•¨)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì¼ë¶€ ë„ì›€ í•„ìš”', score: 6 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì „ì ìœ¼ë¡œ ë„ì›€ í•„ìš”', score: 12 }
  ]},
  { id: 'p2', text: 'ì„¸ìˆ˜í•˜ê¸° (ë¬¼ ë°›ê¸°, ë¹„ëˆ„ì¹ , í—¹êµ¬ê¸° í¬í•¨)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì¼ë¶€ ë„ì›€ í•„ìš”', score: 5 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì „ì ìœ¼ë¡œ ë„ì›€ í•„ìš”', score: 10 }
  ]},
  { id: 'p3', text: 'ì–‘ì¹˜í•˜ê¸° (ì¹«ì†” ì¤€ë¹„, ì¹«ì†”ì§ˆ, í—¹êµ¬ê¸° í¬í•¨)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì¼ë¶€ ë„ì›€ í•„ìš”', score: 4 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì „ì ìœ¼ë¡œ ë„ì›€ í•„ìš”', score: 8 }
  ]},
  { id: 'p4', text: 'ëª©ìš•í•˜ê¸° (ìš•ì‹¤ ì¶œì…, ì „ì‹  ì„¸ì²™ í¬í•¨)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ìƒì²´ëŠ” ê°€ëŠ¥, í•˜ì²´ ë“± ë„ì›€ í•„ìš”', score: 7 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì „ì ìœ¼ë¡œ ë„ì›€ í•„ìš”', score: 15 }
  ]},
  { id: 'p5', text: 'ì‹ì‚¬í•˜ê¸° (ìˆŸê°€ë½Â·ì “ê°€ë½ ì‚¬ìš©, ìŒì‹ ì„­ì·¨)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì˜ê²Œ ì°ì–´ë“œë¦¬ê±°ë‚˜ ë°˜ì°¬ ë– ë“œë ¤ì•¼ í•¨', score: 5 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì…ì— ë„£ì–´ë“œë ¤ì•¼ í•¨', score: 10 }
  ]},
  { id: 'p6', text: 'ì²´ìœ„ë³€ê²½ (ëˆ„ì›Œì„œ ì¢Œìš°ë¡œ ëŒì•„ëˆ•ê¸°)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì¡ì•„ë“œë¦¬ê±°ë‚˜ ë°€ì–´ë“œë ¤ì•¼ í•¨', score: 6 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì „ì ìœ¼ë¡œ ëŒë ¤ë“œë ¤ì•¼ í•¨', score: 12 }
  ]},
  { id: 'p7', text: 'ì¼ì–´ë‚˜ ì•‰ê¸° (ì¹¨ëŒ€ì—ì„œ ìƒì²´ ì¼ìœ¼í‚¤ê¸°)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì†Â·í—ˆë¦¬ ì§€ì§€ í•„ìš”', score: 5 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ë“¤ì–´ì„œ ì•‰í˜€ë“œë ¤ì•¼ í•¨', score: 10 }
  ]},
  { id: 'p8', text: 'ì˜®ê²¨ ì•‰ê¸° (ì¹¨ëŒ€ â†” ì˜ì/íœ ì²´ì–´)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì¼ë¶€ ë„ì›€ í•„ìš”', score: 6 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ì•ˆì•„ì„œ ì˜®ê²¨ë“œë ¤ì•¼ í•¨', score: 12 }
  ]},
  { id: 'p9', text: 'ì‹¤ë‚´ ë³´í–‰ (ë°©ì—ì„œ ê±°ì‹¤ ì´ë™)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'ì§€íŒ¡ì´Â·ë³´í–‰ê¸° ì‚¬ìš©í•´ë„ í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ë¶€ì¶• í•„ìš”', score: 6 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'íœ ì²´ì–´ í•„ìš” ë˜ëŠ” ì™€ìƒ', score: 12 }
  ]},
  { id: 'p10', text: 'í™”ì¥ì‹¤ ì‚¬ìš© (ë³€ê¸° ì‚¬ìš©, ë’¤ì²˜ë¦¬, ì† ì”»ê¸°)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'í˜¼ì ê°€ëŠ¥', score: 0 },
    { label: 'ë¶€ë¶„ ë„ì›€', desc: 'ì¼ë¶€ ë„ì›€ í•„ìš”', score: 7 },
    { label: 'ì™„ì „ ë„ì›€', desc: 'ê¸°ì €ê·€ ì‚¬ìš© ë˜ëŠ” ì „ì ìœ¼ë¡œ ë„ì›€ í•„ìš”', score: 14 }
  ]},
  { id: 'p11', text: 'ëŒ€ë³€ ì¡°ì ˆ (ë³€ì˜ ì¸ì‹, ì¡°ì ˆ ëŠ¥ë ¥)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'ìŠ¤ìŠ¤ë¡œ ì¡°ì ˆ ê°€ëŠ¥', score: 0 },
    { label: 'ê°€ë” ì‹¤ìˆ˜', desc: 'ì›” 1~2íšŒ ì‹¤ë³€', score: 5 },
    { label: 'ìì£¼ ì‹¤ìˆ˜', desc: 'ì£¼ 2íšŒ ì´ìƒ ë˜ëŠ” ê¸°ì €ê·€ ì‚¬ìš©', score: 10 }
  ]},
  { id: 'p12', text: 'ì†Œë³€ ì¡°ì ˆ (ìš”ì˜ ì¸ì‹, ì¡°ì ˆ ëŠ¥ë ¥)', options: [
    { label: 'ì™„ì „ ìë¦½', desc: 'ìŠ¤ìŠ¤ë¡œ ì¡°ì ˆ ê°€ëŠ¥', score: 0 },
    { label: 'ê°€ë” ì‹¤ìˆ˜', desc: 'ì›” ìˆ˜ íšŒ ì‹¤ë‡¨', score: 5 },
    { label: 'ìì£¼ ì‹¤ìˆ˜', desc: 'í•˜ë£¨ 1íšŒ ì´ìƒ ë˜ëŠ” ê¸°ì €ê·€/ë„ë‡¨ê´€ ì‚¬ìš©', score: 10 }
  ]},
];

const cognitiveQuestions = [
  { id: 'c1', text: 'ë‹¨ê¸° ê¸°ì–µ (ë©°ì¹  ì „ ì¼, ì•½ ë³µìš© ì—¬ë¶€, ë¬¼ê±´ ìœ„ì¹˜ë¥¼ ì˜ ìŠìœ¼ì‹¬?)', options: [
    { label: 'ë¬¸ì œì—†ìŒ', desc: 'ê±°ì˜ ìŠì§€ ì•ŠìŒ', score: 0 },
    { label: 'ê°€ë” ë¬¸ì œ', desc: 'ê°€ë” ìŠìœ¼ì‹¬', score: 4 },
    { label: 'ìì£¼ ë¬¸ì œ', desc: 'ê±°ì˜ ë§¤ì¼ ë°˜ë³µ ì§ˆë¬¸', score: 8 }
  ]},
  { id: 'c2', text: 'ë‚ ì§œÂ·ìš”ì¼Â·ê³„ì ˆ ì¸ì§€ (ì˜¤ëŠ˜ì´ ì–¸ì œì¸ì§€ ì•„ì‹¬?)', options: [
    { label: 'ë¬¸ì œì—†ìŒ', desc: 'ëŒ€ë¶€ë¶„ ë§í˜', score: 0 },
    { label: 'ê°€ë” ë¬¸ì œ', desc: 'ê°€ë” í‹€ë¦¬ì‹¬', score: 3 },
    { label: 'ìì£¼ ë¬¸ì œ', desc: 'ìì£¼ í‹€ë¦¬ê±°ë‚˜ ì „í˜€ ëª¨ë¥´ì‹¬', score: 6 }
  ]},
  { id: 'c3', text: 'ì¥ì†Œ ì¸ì§€ (ì§€ê¸ˆ ê³„ì‹  ê³³ì´ ì–´ë””ì¸ì§€ ì•„ì‹¬?)', options: [
    { label: 'ë¬¸ì œì—†ìŒ', desc: 'ì •í™•íˆ ì•„ì‹¬', score: 0 },
    { label: 'ê°€ë” ë¬¸ì œ', desc: 'ê°€ë” í˜¼ë™', score: 3 },
    { label: 'ìì£¼ ë¬¸ì œ', desc: 'ìì£¼ í˜¼ë™ ë˜ëŠ” ëª¨ë¥´ì‹¬', score: 6 }
  ]},
  { id: 'c4', text: 'ê°€ì¡± ì¸ì§€ (ë³´í˜¸ìÂ·ê°€ì¡±ì„ ì•Œì•„ë³´ì‹¬?)', options: [
    { label: 'ë¬¸ì œì—†ìŒ', desc: 'ì˜ ì•Œì•„ë³´ì‹¬', score: 0 },
    { label: 'ê°€ë” ë¬¸ì œ', desc: 'ê°€ë” ëª» ì•Œì•„ë³´ì‹¬', score: 4 },
    { label: 'ìì£¼ ë¬¸ì œ', desc: 'ìì£¼ ëª» ì•Œì•„ë³´ì‹¬', score: 8 }
  ]},
  { id: 'c5', text: 'ì˜ì‚¬ì†Œí†µ (ì§ˆë¬¸ì„ ì´í•´í•˜ê³  ì ì ˆíˆ ëŒ€ë‹µí•˜ì‹¬?)', options: [
    { label: 'ë¬¸ì œì—†ìŒ', desc: 'ì›í™œíˆ ì†Œí†µ ê°€ëŠ¥', score: 0 },
    { label: 'ê°€ë” ë¬¸ì œ', desc: 'ê°€ë” ì—‰ëš±í•œ ëŒ€ë‹µ', score: 3 },
    { label: 'ìì£¼ ë¬¸ì œ', desc: 'ì•ë’¤ê°€ ì•ˆ ë§ê±°ë‚˜ ì†Œí†µ ì–´ë ¤ì›€', score: 6 }
  ]},
  { id: 'c6', text: 'ìƒí™© íŒë‹¨ë ¥ (ê°€ìŠ¤ë¶ˆÂ·êµí†µ ìœ„í—˜ ì¸ì§€, ëˆ ê´€ë¦¬ ë“±)', options: [
    { label: 'ë¬¸ì œì—†ìŒ', desc: 'ì ì ˆíˆ íŒë‹¨ ê°€ëŠ¥', score: 0 },
    { label: 'ê°€ë” ë¬¸ì œ', desc: 'ê°€ë” ì‹¤ìˆ˜', score: 4 },
    { label: 'ìì£¼ ë¬¸ì œ', desc: 'ìì£¼ ìœ„í—˜í•œ ìƒí™© ë°œìƒ', score: 8 }
  ]},
];

const behaviorQuestions = [
  { id: 'b1', text: 'ë§ìƒ (ëˆì„ í›”ì³ê°”ë‹¤, ëˆ„ê°€ í•´ì¹œë‹¤ëŠ” ë“± ê·¼ê±° ì—†ëŠ” ì˜ì‹¬)', type: 'yn', score: 8 },
  { id: 'b2', text: 'í™˜ê° (ì—†ëŠ” ì‚¬ëŒÂ·ì†Œë¦¬Â·ë²Œë ˆ ë“±ì´ ë³´ì´ê±°ë‚˜ ë“¤ë¦°ë‹¤ê³  í•˜ì‹¬)', type: 'yn', score: 8 },
  { id: 'b3', text: 'ìš°ìš¸Â·ë¬´ê¸°ë ¥ (í•˜ë£¨ ëŒ€ë¶€ë¶„ ê¸°ìš´ ì—†ìŒ, ì‚´ê¸° ì‹«ë‹¤ëŠ” í‘œí˜„)', type: 'yn', score: 5 },
  { id: 'b4', text: 'ìˆ˜ë©´ì¥ì•  (ë°¤ì— ëŒì•„ë‹¤ë‹ˆì‹¬, ë‚®Â·ë°¤ ë°”ë€œ)', type: 'yn', score: 5 },
  { id: 'b5', text: 'ê³µê²©ì  í–‰ë™ (ìš•ì„¤, ë¬¼ê±´ ë˜ì§€ê¸°, ë•Œë¦¬ë ¤ í•˜ì‹¬)', type: 'yn', score: 8 },
  { id: 'b6', text: 'ë°°íšŒÂ·ê¸¸ ìƒìŒ (í˜¼ì ë‚˜ê°€ì„œ ê¸¸ì„ ìƒìœ¼ì‹  ì  ìˆìŒ)', type: 'yn', score: 6 },
  { id: 'b7', text: 'ë°˜ë³µ í–‰ë™ (ê°™ì€ ë§Â·ì§ˆë¬¸Â·í–‰ë™ ë°˜ë³µ, ë¬¼ê±´ ìˆ¨ê¸°ê¸°Â·ëª¨ìœ¼ê¸°)', type: 'yn', score: 4 },
];

const nursingQuestions = [
  { id: 'n0', text: 'ì¹˜ë§¤ ì§„ë‹¨ì„ ë°›ìœ¼ì…¨ë‚˜ìš”? (ì¹˜ë§¤ ì§„ë‹¨ì„œ, ì‹ ê²½ê³¼/ì •ì‹ ê±´ê°•ì˜í•™ê³¼ ì§„ë‹¨)', type: 'yn', score: 0, key: 'dementia' },
  { id: 'n1', text: 'ê¸°ê´€ì ˆê°œê´€Â·ì¸ê³µí˜¸í¡ê¸° ê´€ë¦¬ê°€ í•„ìš”í•˜ì‹ ê°€ìš”?', type: 'yn', score: 15 },
  { id: 'n2', text: 'ì‚°ì†Œìš”ë²• (ìíƒ ì‚°ì†Œ ì‚¬ìš©) ì´ í•„ìš”í•˜ì‹ ê°€ìš”?', type: 'yn', score: 10 },
  { id: 'n3', text: 'ìš•ì°½ì´ë‚˜ ë“œë ˆì‹±ì´ í•„ìš”í•œ ìƒì²˜ê°€ ìˆìœ¼ì‹ ê°€ìš”?', type: 'yn', score: 8 },
  { id: 'n4', text: 'ë„ë‡¨ê´€Â·ìœ„ë£¨ê´€(PEG) ë“± ê´€ ê´€ë¦¬ê°€ í•„ìš”í•˜ì‹ ê°€ìš”?', type: 'yn', score: 10 },
  { id: 'n5', text: 'ì¸ìŠë¦° ì£¼ì‚¬ë¥¼ ì§ì ‘ ë§ì§€ ëª»í•˜ì…”ì„œ ëŒ€ì‹  ë†”ë“œë ¤ì•¼ í•˜ë‚˜ìš”?', type: 'yn', score: 5 },
  { id: 'n6', text: 'ê²½ê´€ì˜ì–‘ (íŠœë¸Œë¡œ ì˜ì–‘ ê³µê¸‰) ì´ í•„ìš”í•˜ì‹ ê°€ìš”?', type: 'yn', score: 10 },
];

// ===========================
// STATE
// ===========================
let answers = {};
let currentSection = 0;

// ===========================
// RENDER
// ===========================
function renderPhysical() {
  const container = document.getElementById('physical-questions');
  container.innerHTML = '';
  physicalQuestions.forEach((q, idx) => {
    container.innerHTML += createThreeOptionQuestion(q, idx + 1);
  });
}

function renderCognitive() {
  const container = document.getElementById('cognitive-questions');
  container.innerHTML = '';
  cognitiveQuestions.forEach((q, idx) => {
    container.innerHTML += createThreeOptionQuestion(q, idx + 1);
  });
}

function renderBehavior() {
  const container = document.getElementById('behavior-questions');
  container.innerHTML = '';
  behaviorQuestions.forEach((q, idx) => {
    container.innerHTML += createYNQuestion(q, idx + 1);
  });
}

function renderNursing() {
  const container = document.getElementById('nursing-questions');
  container.innerHTML = '';
  nursingQuestions.forEach((q, idx) => {
    container.innerHTML += createYNQuestion(q, idx + 1);
  });
}

function createThreeOptionQuestion(q, num) {
  return `
    <div class="question-card" id="card-${q.id}">
      <h3><span class="q-num">${num}</span>${q.text}</h3>
      <div class="options">
        ${q.options.map((opt, i) => `
          <button class="option-btn" id="opt-${q.id}-${i}" onclick="selectOption('${q.id}', ${opt.score}, '${q.id}-${i}', this)">
            <span class="opt-dot"></span>
            <span class="opt-label"><strong>${opt.label}</strong> â€” ${opt.desc}</span>
            <span class="opt-score">+${opt.score}ì </span>
          </button>
        `).join('')}
      </div>
    </div>
  `;
}

function createYNQuestion(q, num) {
  return `
    <div class="question-card" id="card-${q.id}">
      <h3><span class="q-num">${num}</span>${q.text}</h3>
      <div class="yn-options">
        <button class="yn-btn" id="yn-yes-${q.id}" onclick="selectYN('${q.id}', true, ${q.score}, '${q.key || ''}')">ì˜ˆ Â· ìˆìŒ</button>
        <button class="yn-btn" id="yn-no-${q.id}" onclick="selectYN('${q.id}', false, ${q.score}, '${q.key || ''}')">ì•„ë‹ˆì˜¤ Â· ì—†ìŒ</button>
      </div>
    </div>
  `;
}

// ===========================
// INTERACTIONS
// ===========================
function selectOption(qId, score, optId, btn) {
  answers[qId] = score;
  // Clear others
  const card = document.getElementById('card-' + qId);
  card.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');
  card.classList.add('answered');
}

function selectYN(qId, isYes, score, key) {
  answers[qId] = isYes ? score : 0;
  if (key === 'dementia') answers['_dementia'] = isYes;
  
  const yesBtn = document.getElementById('yn-yes-' + qId);
  const noBtn = document.getElementById('yn-no-' + qId);
  yesBtn.className = isYes ? 'yn-btn selected-yes' : 'yn-btn';
  noBtn.className = isYes ? 'yn-btn selected-no' : 'yn-btn selected-yes';
  document.getElementById('card-' + qId).classList.add('answered');
}

// ===========================
// NAVIGATION
// ===========================
function startDiagnosis() {
  renderPhysical();
  renderCognitive();
  renderBehavior();
  renderNursing();
  goSection(1);
}

function goSection(n) {
  document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
  document.getElementById('section-' + n).classList.add('active');
  currentSection = n;
  window.scrollTo(0, 0);
  updateProgress(n);
}

function updateProgress(n) {
  const total = 5;
  const pct = n === 0 ? 0 : Math.round((n / 4) * 100);
  document.getElementById('progressFill').style.width = pct + '%';
  const labels = ['', '1/4 ì‹ ì²´ê¸°ëŠ¥', '2/4 ì¸ì§€ê¸°ëŠ¥', '3/4 í–‰ë™ë³€í™”', '4/4 ê°„í˜¸ì²˜ì¹˜', 'ê²°ê³¼ í™•ì¸'];
  document.getElementById('progressLabel').textContent = labels[n] || 'ì™„ë£Œ';
}

// ===========================
// CALCULATE
// ===========================
function calculateResult() {
  // Sum scores
  let physicalScore = 0;
  physicalQuestions.forEach(q => { physicalScore += (answers[q.id] || 0); });
  
  let cogScore = 0;
  cognitiveQuestions.forEach(q => { cogScore += (answers[q.id] || 0); });
  
  let behaviorScore = 0;
  behaviorQuestions.forEach(q => { behaviorScore += (answers[q.id] || 0); });
  
  let nursingScore = 0;
  nursingQuestions.forEach(q => { 
    if (q.id !== 'n0') nursingScore += (answers[q.id] || 0);
  });

  const hasDementia = answers['_dementia'] === true;

  // Convert to 100-point scale (approximate)
  const rawTotal = physicalScore + cogScore + behaviorScore + nursingScore;
  const maxPossible = 105 + 42 + 44 + 58; // sum of max scores
  const normalizedScore = Math.round((rawTotal / maxPossible) * 100);

  // Determine grade
  let grade, gradeClass, gradeDesc, services;
  
  if (normalizedScore >= 95) {
    grade = '1ë“±ê¸‰ ì˜ˆìƒ';
    gradeClass = 'grade1';
    gradeDesc = 'ì¼ìƒìƒí™œ ì „ë°˜ì— ê±¸ì³ ì „ì ìœ¼ë¡œ ë‹¤ë¥¸ ì‚¬ëŒì˜ ë„ì›€ì´ í•„ìš”í•œ ìƒíƒœì…ë‹ˆë‹¤. (95ì  ì´ìƒ)';
    services = ['ì‹œì„¤ì…ì†Œ (ìš”ì–‘ì›)', 'ë°©ë¬¸ìš”ì–‘ (ì›” ìµœëŒ€ 211ì‹œê°„)', 'ë°©ë¬¸ëª©ìš•', 'ë°©ë¬¸ê°„í˜¸', 'ì£¼ì•¼ê°„ë³´í˜¸'];
  } else if (normalizedScore >= 75) {
    grade = '2ë“±ê¸‰ ì˜ˆìƒ';
    gradeClass = 'grade2';
    gradeDesc = 'ì¼ìƒìƒí™œ ìƒë‹¹ ë¶€ë¶„ì—ì„œ ë„ì›€ì´ í•„ìš”í•œ ìƒíƒœì…ë‹ˆë‹¤. (75~94ì )';
    services = ['ì‹œì„¤ì…ì†Œ ê°€ëŠ¥', 'ë°©ë¬¸ìš”ì–‘ (ì›” ìµœëŒ€ 188ì‹œê°„)', 'ë°©ë¬¸ëª©ìš•', 'ë°©ë¬¸ê°„í˜¸', 'ì£¼ì•¼ê°„ë³´í˜¸'];
  } else if (normalizedScore >= 60) {
    grade = '3ë“±ê¸‰ ì˜ˆìƒ';
    gradeClass = 'grade3';
    gradeDesc = 'ì¼ìƒìƒí™œì— ë¶€ë¶„ì ìœ¼ë¡œ ë„ì›€ì´ í•„ìš”í•œ ìƒíƒœì…ë‹ˆë‹¤. (60~74ì )';
    services = ['ë°©ë¬¸ìš”ì–‘ (ì›” ìµœëŒ€ 153ì‹œê°„)', 'ë°©ë¬¸ëª©ìš•', 'ì£¼ì•¼ê°„ë³´í˜¸', 'ë‹¨ê¸°ë³´í˜¸'];
  } else if (normalizedScore >= 51) {
    grade = '4ë“±ê¸‰ ì˜ˆìƒ';
    gradeClass = 'grade4';
    gradeDesc = 'ì¼ìƒìƒí™œ ì¼ì • ë¶€ë¶„ì— ë„ì›€ì´ í•„ìš”í•œ ìƒíƒœì…ë‹ˆë‹¤. (51~59ì )';
    services = ['ë°©ë¬¸ìš”ì–‘ (ì›” ìµœëŒ€ 129ì‹œê°„)', 'ë°©ë¬¸ëª©ìš•', 'ì£¼ì•¼ê°„ë³´í˜¸'];
  } else if (normalizedScore >= 45 && hasDementia) {
    grade = '5ë“±ê¸‰ ì˜ˆìƒ';
    gradeClass = 'grade5';
    gradeDesc = 'ì¹˜ë§¤ ì§„ë‹¨ê³¼ í•¨ê»˜ ê²½ë„ì˜ ê¸°ëŠ¥ ì €í•˜ê°€ ìˆëŠ” ìƒíƒœì…ë‹ˆë‹¤. (45~50ì  + ì¹˜ë§¤)';
    services = ['ë°©ë¬¸ìš”ì–‘', 'ë°©ë¬¸ëª©ìš•', 'ì£¼ì•¼ê°„ë³´í˜¸', 'ì¸ì§€í™œë™í˜• í”„ë¡œê·¸ë¨'];
  } else if (normalizedScore < 45 && hasDementia) {
    grade = 'ì¸ì§€ì§€ì›ë“±ê¸‰ ì˜ˆìƒ';
    gradeClass = 'cognition';
    gradeDesc = 'ì¹˜ë§¤ ì§„ë‹¨ì€ ìˆìœ¼ë‚˜ ì‹ ì²´ ê¸°ëŠ¥ ì €í•˜ëŠ” ê²½ë„ì¸ ìƒíƒœì…ë‹ˆë‹¤. (45ì  ë¯¸ë§Œ + ì¹˜ë§¤)';
    services = ['ì£¼ì•¼ê°„ë³´í˜¸ (ì¸ì§€í™œë™í˜•)', 'ë°©ë¬¸ìš”ì–‘ (ì œí•œì )'];
  } else {
    grade = 'ë“±ê¸‰ íƒˆë½ ê°€ëŠ¥ì„±';
    gradeClass = 'fail';
    gradeDesc = 'í˜„ì¬ ì‘ë‹µìœ¼ë¡œëŠ” ì¥ê¸°ìš”ì–‘ ì¸ì • ì ìˆ˜ì— ë¯¸ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¤€ë¹„ë¥¼ ë” í•´ì£¼ì„¸ìš”.';
    services = [];
  }

  // Weak points
  const weakPoints = [];
  if (physicalScore < 20 && normalizedScore < 60) {
    weakPoints.push({ icon: 'ğŸ’ª', title: 'ì‹ ì²´ê¸°ëŠ¥ ì ìˆ˜ ë³´ì™„ í•„ìš”', desc: 'ë‚™ìƒ ê¸°ë¡, ì•¼ê°„ ë³´í–‰ ë¬¸ì œ, ì‹¤ì œ ë„ì›€ ë°›ëŠ” ìƒí™©ì„ êµ¬ì²´ì ìœ¼ë¡œ ê¸°ë¡í•´ ë‘ì„¸ìš”.' });
  }
  if (cogScore < 10 && hasDementia) {
    weakPoints.push({ icon: 'ğŸ§ ', title: 'ì¸ì§€ê¸°ëŠ¥ ê¸°ë¡ ê°•í™” í•„ìš”', desc: 'ì¹˜ë§¤ ì§„ë‹¨ì„ ë°›ìœ¼ì…¨ë‹¤ë©´ ì‹ ê²½ê³¼ ì§„ë£Œ ê¸°ë¡, ë°°íšŒÂ·ë§ìƒ ì—í”¼ì†Œë“œë¥¼ ìƒì„¸íˆ ê¸°ë¡í•˜ì„¸ìš”.' });
  }
  if (behaviorScore === 0 && cogScore > 10) {
    weakPoints.push({ icon: 'âš ï¸', title: 'í–‰ë™ë³€í™” í•­ëª© ì²´í¬ í•„ìš”', desc: 'ìˆ˜ë©´ì¥ì• , ìš°ìš¸, ë°˜ë³µ í–‰ë™ ë“±ì„ "ë³„ê±° ì•„ë‹ˆë‹¤"ê³  ë„˜ê¸°ì§€ ë§ê³  ìˆëŠ” ê·¸ëŒ€ë¡œ ì „ë‹¬í•˜ì„¸ìš”.' });
  }
  if (!hasDementia && normalizedScore < 51) {
    weakPoints.push({ icon: 'ğŸ“‹', title: 'ì¹˜ë§¤ ì§„ë‹¨ ê²€í† ', desc: 'ì¸ì§€ê¸°ëŠ¥ ì €í•˜ ì¦ìƒì´ ìˆë‹¤ë©´ ì‹ ê²½ê³¼ ë°©ë¬¸ì„ í†µí•´ ì¹˜ë§¤ ì§„ë‹¨ ì—¬ë¶€ë¥¼ í™•ì¸í•´ ë³´ì„¸ìš”. 5ë“±ê¸‰ ê°€ëŠ¥ì„±ì´ ì—´ë¦½ë‹ˆë‹¤.' });
  }
  if (nursingScore === 0 && normalizedScore < 60) {
    weakPoints.push({ icon: 'ğŸ¥', title: 'ì˜ë£Œ ê¸°ë¡ ì¤€ë¹„ í•„ìš”', desc: 'ë³µìš© ì•½ë¬¼, í†µì› ê¸°ë¡, ìµœê·¼ ì‘ê¸‰ì‹¤ ë°©ë¬¸ ê¸°ë¡ì„ ë¯¸ë¦¬ ì¤€ë¹„í•˜ì„¸ìš”.' });
  }

  showResult(grade, gradeClass, gradeDesc, normalizedScore, physicalScore, cogScore, behaviorScore, nursingScore, services, weakPoints, hasDementia);
}

function showResult(grade, gradeClass, gradeDesc, score, pScore, cScore, bScore, nScore, services, weakPoints, hasDementia) {
  goSection(5);

  const maxP = 105, maxC = 42, maxB = 44, maxN = 58;

  let servicesHTML = services.length > 0
    ? services.map(s => `<div style="display:flex;align-items:center;gap:8px;padding:8px 0;border-bottom:1px solid var(--border);font-size:13px;"><span style="color:var(--primary);font-weight:700;">âœ“</span>${s}</div>`).join('')
    : '<p style="font-size:13px;color:var(--text-muted);">í˜„ì¬ ì ìˆ˜ë¡œëŠ” ê¸‰ì—¬ ìˆ˜ê¸‰ì´ ì–´ë µìŠµë‹ˆë‹¤. ì•„ë˜ ë³´ì™„ ë°©ë²•ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.</p>';

  let weakHTML = weakPoints.length > 0
    ? weakPoints.map(w => `<div class="weak-item"><div class="weak-icon">${w.icon}</div><div class="weak-content"><h4>${w.title}</h4><p>${w.desc}</p></div></div>`).join('')
    : '<p style="font-size:13px;color:var(--primary);">âœ“ ì „ ì˜ì—­ì—ì„œ ê³ ë¥´ê²Œ ì‘ë‹µë˜ì—ˆìŠµë‹ˆë‹¤. ì‹¤ì œ ë°©ë¬¸ì¡°ì‚¬ì—ì„œë„ ìˆëŠ” ê·¸ëŒ€ë¡œ ë§ì”€í•´ ì£¼ì„¸ìš”.</p>';

  document.getElementById('result-content').innerHTML = `
    <div class="result-hero ${gradeClass}">
      <div class="result-grade-label">ì˜ˆìƒ íŒì • ê²°ê³¼</div>
      <div class="result-grade-main">${grade}</div>
      <div class="result-score">ìê°€ì§„ë‹¨ í™˜ì‚° ì ìˆ˜: ì•½ ${score}ì ëŒ€</div>
      <div class="result-desc">${gradeDesc}</div>
    </div>

    <div class="result-card">
      <h3>ğŸ“Š ì˜ì—­ë³„ ì ìˆ˜ ë¶„í¬</h3>
      <div class="score-row">
        <span class="score-row-label">ì‹ ì²´ê¸°ëŠ¥</span>
        <div class="score-bar-bg"><div class="score-bar-fill" style="width:${Math.min(100,Math.round(pScore/maxP*100))}%;background:#2d5a3d;"></div></div>
        <span class="score-val">${pScore}ì </span>
      </div>
      <div class="score-row">
        <span class="score-row-label">ì¸ì§€ê¸°ëŠ¥</span>
        <div class="score-bar-bg"><div class="score-bar-fill" style="width:${Math.min(100,Math.round(cScore/maxC*100))}%;background:#2563eb;"></div></div>
        <span class="score-val">${cScore}ì </span>
      </div>
      <div class="score-row">
        <span class="score-row-label">í–‰ë™ë³€í™”</span>
        <div class="score-bar-bg"><div class="score-bar-fill" style="width:${Math.min(100,Math.round(bScore/maxB*100))}%;background:#d97706;"></div></div>
        <span class="score-val">${bScore}ì </span>
      </div>
      <div class="score-row">
        <span class="score-row-label">ê°„í˜¸ì²˜ì¹˜</span>
        <div class="score-bar-bg"><div class="score-bar-fill" style="width:${Math.min(100,Math.round(nScore/maxN*100))}%;background:#c94040;"></div></div>
        <span class="score-val">${nScore}ì </span>
      </div>
      <p style="font-size:11px;color:var(--text-muted);margin-top:10px;">* ì‹¤ì œ ê³µë‹¨ ì ìˆ˜ì™€ ì°¨ì´ê°€ ìˆì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì°¸ê³ ìš©ìœ¼ë¡œë§Œ í™œìš©í•´ ì£¼ì„¸ìš”.</p>
    </div>

    <div class="result-card">
      <h3>âœ… ì´ìš© ê°€ëŠ¥í•œ ì„œë¹„ìŠ¤</h3>
      ${servicesHTML}
    </div>

    <div class="result-card">
      <h3>ğŸ”§ ë³´ì™„ì´ í•„ìš”í•œ ë¶€ë¶„</h3>
      ${weakHTML}
    </div>

    <div class="result-card">
      <h3>ğŸ“‹ ë“±ê¸‰ë³„ ê¸°ì¤€ (2026ë…„ ê¸°ì¤€)</h3>
      <table class="grade-table">
        <thead>
          <tr><th>ë“±ê¸‰</th><th>ì¸ì •ì ìˆ˜</th><th>ìƒíƒœ</th></tr>
        </thead>
        <tbody>
          <tr><td><span class="grade-dot" style="background:#7c3aed"></span>1ë“±ê¸‰</td><td>95ì  ì´ìƒ</td><td>ì „ì  ë„ì›€ í•„ìš”</td></tr>
          <tr><td><span class="grade-dot" style="background:#c94040"></span>2ë“±ê¸‰</td><td>75~94ì </td><td>ìƒë‹¹ ë¶€ë¶„ ë„ì›€</td></tr>
          <tr><td><span class="grade-dot" style="background:#d97706"></span>3ë“±ê¸‰</td><td>60~74ì </td><td>ë¶€ë¶„ ë„ì›€</td></tr>
          <tr><td><span class="grade-dot" style="background:#2563eb"></span>4ë“±ê¸‰</td><td>51~59ì </td><td>ì¼ì • ë¶€ë¶„ ë„ì›€</td></tr>
          <tr><td><span class="grade-dot" style="background:#0891b2"></span>5ë“±ê¸‰</td><td>45~50ì </td><td>ê²½ë„ + ì¹˜ë§¤ í•„ìˆ˜</td></tr>
          <tr><td><span class="grade-dot" style="background:#6d28d9"></span>ì¸ì§€ì§€ì›</td><td>45ì  ë¯¸ë§Œ</td><td>ê²½ë„ì¸ì§€ì¥ì• ì— ì¤€í•˜ëŠ” ì •ë„</td></tr>
        </tbody>
      </table>
    </div>

    <div class="cta-card">
      <h3>ğŸ™‹ ë” ì •í™•í•œ ìƒë‹´ì´ í•„ìš”í•˜ì‹ ê°€ìš”?</h3>
      <p>ì‹¤ì œ ë°©ë¬¸ì¡°ì‚¬ ì „ 1:1 ì‚¬ì „ ìƒë‹´ì„ í†µí•´ ì˜ˆìƒ ë“±ê¸‰ê³¼ ì¤€ë¹„ ì„œë¥˜ë¥¼ ë¬´ë£Œë¡œ ì•ˆë‚´í•´ ë“œë¦½ë‹ˆë‹¤.</p>
      <p style="margin-top:10px;font-size:11px;opacity:0.7;">âš ï¸ ë³¸ ì½˜í…ì¸ ëŠ” ë¬´ë‹¨ ë°°í¬ë¥¼ ê¸ˆì§€í•©ë‹ˆë‹¤.</p>
      <a href="#" class="cta-btn">ì¹´í˜ì—ì„œ ë¬´ë£Œ ìƒë‹´ ì‹ ì²­í•˜ê¸° â†’</a>
    </div>
  `;
}

function restart() {
  answers = {};
  document.querySelectorAll('.option-btn').forEach(b => b.classList.remove('selected'));
  document.querySelectorAll('.yn-btn').forEach(b => b.className = 'yn-btn');
  document.querySelectorAll('.question-card').forEach(c => c.classList.remove('answered'));
  goSection(0);
}
</script>
</body>
</html>
